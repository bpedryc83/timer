import { useEffect, useState } from 'react';
import moment from 'moment';
import Button from '../Button/Button'

import styles from './Timer.module.scss';

const Timer = props => {

  let startTime = moment().set({'hour': 0, 'minute': 0, 'second': 0, 'millisecond': 0}).format('HH:mm:ss:SSS');

  const [time, setTime] = useState(startTime);
  
  let counter;


  const setNewTime = () => {
    setTime(time => moment(time, 'HH:mm:ss:SSS').add(1, 'ms').format('HH:mm:ss:SSS'));
  }

  const counterStop = e => {
    console.log('Stop');
    clearInterval(counter);
  }
  

  const counterStart = e => {
    e.preventDefault();

    counter = setInterval(setNewTime, 1);
  };
  
  /*useEffect(() => {
    setInterval(setNewTime, 1);
  }, []);*/


  return (
    <div className={styles.timerArea}>
      <div className={styles.counter}>{time}</div>
      <div className={styles.divButtons}>
        <form onSubmit={counterStart}>
          <Button>Start</Button>
        </form>
        <form onSubmit={counterStop}>
          <Button>Stop</Button>
        </form>
        <Button>Reset</Button>
      </div>
    </div>
  );

}

export default Timer;